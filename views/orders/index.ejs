<%- include('../partials/header') %>
<body>
  <div class="orderscontainer">
    <div class="bckgrnd-crd">    
      <!-- Display cart contents -->
      <h2>Cart</h2>
      <br>
      <% if (isEmpty) { %>
        <p>Your cart is empty.</p>
      <% } else { %>
        <h3>Total items in cart: <%= totalItems %></h3>
        <!-- Display orders in a list -->
        <ul class="cart-items">
          <% orders.forEach(order => { %>
            <li>
              <!-- Display order information -->
              <br><br>
              <ul>
                <% order.items.forEach(item => { %>
                  <li>
                    <img src="<%= item.image %>" id="order-img">
                    <br><br>
                    <p><%= item.name %></p>
                    <p>Price: $<%= item.price %></p>
                    <br>
                    <form action="/orders/delete/<%= item._id %>" method="POST">
                      <button type="submit">Remove Item</button>
                    </form>
                  </li>
                  <br><br>
                <% }); %>
              </ul>
            </li>
          <% }); %>
        </ul>
      <% } %>
    </div>
  </div>
    <div class="checkbox">
      <h3>Total: $<%= total.toFixed(2) %></h3>
      <br>
      <% console.log("Is cart empty?", isEmpty); %> <!--remove after -->
      <form action="/checkout" method="GET">
        <!-- Disable checkout button if cart is empty -->
        <button <% if (isEmpty) { %> disabled <% } %>>Checkout</button>
      </form>
      <br>
      <!-- link to back to homepage -->
      <a href="/products">Continue Shopping</a>
    </div>
  <%- include('../partials/footer') %>
</body>
